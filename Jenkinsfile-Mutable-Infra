pipeline {
agent {
label 'WORKSTATION'
}
parameters {
      choice(name: 'ENV', choices: ['', 'dev', 'prod'], description: 'Choose Env')
      string(name: 'COMPONENT', defaultValue: '', description: 'Which component')
}
stages {
stage('Get Git Repo') {
steps {
dir('code') {

git branch: 'main', url: 'https://github.com/Siny93/${COMPONENT}.git'
}
}
}

}

stage('Terraform apply') {
steps {
dir('code') {

sh '''
  cd terraform-mutable
  terraform init -backend-config=env/${ENV}-backend.tfvars
  terraform apply -auto-approve -var-file=env/${ENV}.tfvars


'''
}
}
}



}